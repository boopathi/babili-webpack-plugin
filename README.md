[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![test][test]][test-url]
[![coverage][cover]][cover-url]
[![chat][chat]][chat-url]

<div align="center">
  <a href="https://github.com/babel">
    <img width="100" height="100"
    src="https://cdn.worldvectorlogo.com/logos/babel-10.svg">
  </a>
  <a href="https://github.com/webpack/webpack">
    <img width="100" height="100"
      src="https://cdn.rawgit.com/webpack/media/e7485eb2/logo/icon.svg">
  </a>
  <h1>Babel Minify Plugin</h1>
  <p>A Webpack Plugin for <a href="https://github.com/babel/minify">Babel Minify</a><p>
</div>

<h2 align="center">Install</h2>

```bash
npm i -D babel-minify-webpack-plugin
```

<h2 align="center">Usage</h2>

**webpack.config.js**
```js
const MinifyPlugin = require("babel-minify-webpack-plugin");

module.exports = {
  plugins: [
    new MinifyPlugin(minifyOptions, pluginOptions)
  ]
}
```

### `Why`

You can also use [babel-loader](https://github.com/babel/babel-loader) for webpack and include `babel-minify` [as a preset](https://github.com/babel/minify#babel-preset) and should be much faster than using this - as babili will operate on smaller file sizes. But then, why does this plugin exist at all?

1. A webpack loader operates on single files and `babel-minify` used as a webpack loader, it is going to consider each file to be executed directly in the browser global scope (by default) and will not optimize some things in the toplevel scope. This is going to change and you can opt-in to optimize toplevel scope - [babel/minify#210](https://github.com/babel/minify/issues/210), [babel/minify#203](https://github.com/babel/minify/issues/203), etc...

2. When you exclude `node_modules` from being run through the `babel-loader`, `babel-minify` optimizations are not applied to the excluded files as it doesn't pass through the minifier.

3. When you use the `babel-loader` with webpack, the code generated by webpack for the module system doesn't go through the loader and is not optimized by `babel-minify`.

4. A webpack plugin can operate on the entire chunk/bundle (compilation) output and can optimize the whole bundle and you can see some differences in minified output. But this will be a lot slower as the file size is usually really huge. So there is [another idea](https://github.com/boopathi/babel-minify-webpack-plugin/issues/8) where we can apply some optimizations as a part of the loader and some optimizations in a plugin.

<h2 align="center">Options</h2>

### `Minify`

`options` are passed on to the `babel-preset-minify`. You can find a list of [all available options](https://github.com/babel/minify/tree/master/packages/babel-preset-minify#options) in the package directory.

|Name|Type|Default|Description|
|:--:|:--:|:-----:|:----------|
|**`minify`**|`{Object}`|`{}`|`babel-minify` Options|

**webpack.config.js**
```js
[
  new MinifyPlugin({ ...options }, pluginOptions)
]
```

### `Plugin`

|Name|Type|Default|Description|
|:--:|:--:|:-----:|:----------|
|**`test`**|`{RegExp}`|`/\.js($\|\?)/i`|Test to match files against|
|**`parser`**|`{Object}`|`{}`|Configures `babel` with custom parser options|
|**`babel`**|`{Object}`|`require("babel-core")`|Pass in a custom `babel-core` version|
|**`preset`**|`{Object}`|`require("babel-preset-minify")`|Pass in a custom `babel-preset-minify` version|
|**`comments`**|`{Boolean\|Regex\|Function}`|`/@preserve\|@licen(s\|c)e/`|Value to remove/preserve comments|
|**`sourceMap`**|`{Boolean}`|`false`|Use source maps to map error message locations to modules (This slows down the compilation). Uses [devtool](https://webpack.js.org/configuration/devtool/). Set this options to override `devtool`|

### `test`

**webpack.config.js**
```js
[
  new MinifyPlugin(minifyOptions, { test: /\.mjs$/i })
]
```

### `parser`

**webpack.config.js**
```js
[
  new MinifyPlugin(minifyOptions, { parser: {} })
]
```

### `babel`

**webpack.config.js**
```js
[
  new MinifyPlugin(minifyOptions, { babel: require('babel-core') })
]
```

### `preset`

**webpack.config.js**
```js
[
  new MinifyPlugin(minifyOptions, { preset: require('babel-preset-minify') })
]
```

### `comments`

**webpack.config.js**
```js
[
  new MinifyPlugin(minifyOptions, { comments: false })
]
```

### `sourceMap`

**webpack.config.js**
```js
[
  new MinifyPlugin(minifyOptions, { sourceMap: true })
]
```


<h2 align="center">Maintainers</h2>

<table>
  <tbody>
    <tr>
      <td align="center">
        <a href="https://github.com/boopathi">
          <img width="150" height="150" src="https://github.com/boopathi.png?size=150">
          </br>
          Boopathi Rajaa
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/bebraw">
          <img width="150" height="150" src="https://github.com/bebraw.png?v=3&s=150">
          </br>
          Juho Vepsäläinen
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/d3viant0ne">
          <img width="150" height="150" src="https://github.com/d3viant0ne.png?v=3&s=150">
          </br>
          Joshua Wiens
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/michael-ciniawsky">
          <img width="150" height="150" src="https://github.com/michael-ciniawsky.png?v=3&s=150">
          </br>
          Michael Ciniawsky
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/evilebottnawi">
          <img width="150" height="150" src="https://github.com/evilebottnawi.png?v=3&s=150">
          </br>
          Alexander Krasnoyarov
        </a>
      </td>
    </tr>
  <tbody>
</table>


[npm]: https://img.shields.io/npm/v/babel-minify-webpack-plugin.svg
[npm-url]: https://npmjs.com/package/babel-minify-webpack-plugin

[node]: https://img.shields.io/node/v/babel-minify-webpack-plugin.svg
[node-url]: https://nodejs.org

[deps]: https://david-dm.org/webpack-contrib/babel-minify-webpack-plugin.svg
[deps-url]: https://david-dm.org/webpack-contrib/babel-minify-webpack-plugin

[test]: https://travis-ci.org/webpack-contrib/babel-minify-webpack-plugin.svg
[test-url]: https://travis-ci.org/webpack-contrib/babel-minify-webpack-plugin

[cover]: https://codecov.io/gh/webpack-contrib/babili-webpack-plugin/branch/master/graph/badge.svg
[cover-url]: https://codecov.io/gh/webpack-contrib/babel-minify-webpack-plugin

[chat]: https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg
[chat-url]: https://gitter.im/webpack/webpack
